(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{be24:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("deliveryFinance")],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header_vel",[e._v("\n    Nota de Finanza\n")]),a("div",[a("q-list",{staticClass:"text-black",attrs:{dark:"",bordered:"",separator:""}},e._l(e.delivery,(function(t,n){return"finance"===t.module&&1==t.status?a("noteCard",{key:n,attrs:{note:t}}):e._e()})),1)],1)],1)},s=[],r=a("d784d"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-expansion-item",{attrs:{"expand-separator":"","header-class":"item-vel bg-blue-grey-11 text-blue"},scopedSlots:e._u([{key:"header",fn:function(){return[a("q-item-section",[e.hiddenNotifi?a("notificationsCounterForIten",{attrs:{url:"note_delivery_finance",num:e.note.purchase_order.id,cargarNotifi:7}}):e._e(),a("q-item-label",{staticClass:"text-black"},[e._v("Orden de Compra N # : "),a("strong",[e._v(" "+e._s(e.formatId(e.note.purchase_order.id)))])]),a("q-item-label",{staticClass:"text-black"},[e._v("Fecha :"),a("span",{},[a("strong",[e._v(" "+e._s(e._f("formatDate")(e.note.created_at))+" ")])])]),a("q-item-label",{staticClass:"text-black"},[e._v("Hora :"),a("span",{},[a("strong",[e._v(" "+e._s(e._f("formatTime")(e.note.created_at)))])])]),1==e.note.status?a("q-item-label",{staticClass:"text-black"},[e._v("Estatus :"),a("span",{},[a("strong",[e._v(" "+e._s("Pendiente")+" ")])])]):e._e(),2==e.note.status?a("q-item-label",{staticClass:"text-black"},[e._v("Estatus :"),a("span",{},[a("strong",[e._v(" "+e._s("Pagado")+" ")])])]):e._e()],1)]},proxy:!0}])},[a("q-card-section",{staticClass:"q-mt-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Confirmar"},on:{click:function(t){return e.deleteNotificacion(e.note.purchase_order.id)}}})],1)])])],1),a("q-dialog",{staticClass:"flex flex-center",attrs:{persistent:"",maximized:e.maximizedToggle},model:{value:e.showPagarExtension,callback:function(t){e.showPagarExtension=t},expression:"showPagarExtension"}},[a("q-card",{staticClass:"modal-card"},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-subtitle2"},[e._v("Confirmar Forma de Pago")])]),a("q-separator"),a("q-card-section"),a("div",[a("iniciedFile",{attrs:{request:e.note.purchase_order}})],1),a("div",{staticClass:"q-mt-md"},[a("iniciedFilee",{attrs:{request:e.note.purchase_order,note:e.note}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Confirmo"},on:{click:function(t){return e.confirmacion()}}})],1),a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"aboo_btn  bg-red-4 full-width",attrs:{label:"Cancelar"}})],1)])],1)],1)],1)},c=[],d=(a("ac1f"),a("1276"),a("bd4c")),u=a("9213"),m=a("eaa6"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn",{staticClass:"q-mb-xs full-width",attrs:{icon:"photo_camera",label:"Recibo/Factura",color:"positive"},on:{click:function(t){e.show=!e.show}}}),a("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("q-card",[a("q-bar",[a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?a("q-tooltip",{staticClass:"bg-white text-primary"},[e._v("Minimize")]):e._e()],1),a("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():a("q-tooltip",{staticClass:"bg-white text-primary"},[e._v("Maximize")])],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{staticClass:"bg-white text-primary"},[e._v("Close")])],1)],1),a("UpBtn",{attrs:{request:e.request,note:e.note}}),a("files",{attrs:{request:e.request,note:e.note}})],1)],1)],1)},p=[],h=a("0500"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn",{staticClass:"q-mb-xs full-width",attrs:{icon:"photo_camera",color:"positive",push:""},on:{click:function(t){return e.takePicture()}}})],1)},v=[],b=a("c973"),_=a.n(b),q=(a("96cf"),a("b0c0"),a("e260"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("81c3")),w=q["b"].Camera,x={data:function(){return{src:null}},props:["request","note"],computed:{user:{get:function(){return this.$store.getters["auth/user"]}}},methods:{onFileChange:function(e){alert();var t=e.target.files||e.dataTransfer.files;if(t.length){var a=new FileReader;a.readAsDataURL(t[0]),this.file=t[0];var n=this;this.msg=this.file.name,a.onload=function(){n.result=a.result}}},takePicture:function(){var e=this;return _()(regeneratorRuntime.mark((function t(){var a,n,i,o,s,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.getPhoto({quality:90,allowEditing:!0,resultType:q["a"].Base64});case 2:for(a=t.sent,a.base64String,n=new FormData,i=atob(a.base64String),o=new Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);r=new Uint8Array(o),l=new Blob([r],{type:"image/"+a.format}),e.src=l,n.append("file",l),n.append("order_id",e.request.id),n.append("format",a.format),e.$q.loading.show(),axios.post("po/cashTurned",n).then((function(t){t.data.note_id=e.note.id,e.$store.commit("delivery/set_file_to_request",t.data),e.$root.$emit("set_foto_Turned"),e.$q.loading.hide()})).catch((function(t){console.log("Malo",t),e.$q.loading.hide()}));case 16:case"end":return t.stop()}}),t)})))()}}},C=x,y=a("2877"),$=a("9c40"),k=a("eebe"),T=a.n(k),z=Object(y["a"])(C,g,v,!1,null,null,null),F=z.exports;T()(z,"components",{QBtn:$["a"]});var D={data:function(){return{show:!1,maximizedToggle:!0}},props:["request","note"],components:{files:h["a"],UpBtn:F},mounted:function(){var e=this;this.$root.$on("FileModalMoneyTurned_refreshh",(function(){e.show=!1}))}},P=D,Q=a("24e8"),E=a("f09f"),N=a("d847"),S=a("2c91"),B=a("05c0"),M=a("7f67"),I=Object(y["a"])(P,f,p,!1,null,null,null),O=I.exports;T()(I,"components",{QBtn:$["a"],QDialog:Q["a"],QCard:E["a"],QBar:N["a"],QSpace:S["a"],QTooltip:B["a"]}),T()(I,"directives",{ClosePopup:M["a"]});var j=a("e93a"),A={data:function(){return{showPagar:!1,showPagarExtension:!1,maximizedToggle:!0,disable:!0,hiddenNotifi:!0}},computed:{},props:["note"],components:{iniciedFile:u["a"],showFile:m["a"],iniciedFilee:O,notificationsCounterForIten:j["a"]},filters:{formatDate:function(e){var t=e.split("T"),a=t[0].split("-"),n=new Date(a[0],a[1],a[2]);return d["a"].formatDate(n,"DD-MM-YYYY")},formatTime:function(e){var t=e.split("T"),a=t[1].split(":"),n=new Date(a[0],a[1]);return d["a"].formatDate(n,"hh:mm:ss A")}},methods:{deleteNotificacion:function(e){this.showPagarExtension=!0,this.$store.commit("auth/remove_notifications_NoteDeliveryFinance",e),this.hiddenNotifi=!1},formatId:function(e){for(var t=String(e),a="#",n=4-t.length,i=0;i<n;i++)a+="0";return a+t},confirmacion:function(){var e=this,t={note_id:this.note.id,order_id:this.note.purchase_order.id,status_note:2,status_orden:4};this.$q.loading.show(),axios.post("delivery/confirmad/",t).then((function(t){e.$q.notify({message:"Pago en la tienda Exitoso",color:"green"}),e.$q.loading.hide(),e.showPagar=!1,e.$store.commit("delivery/changerStatusDeliveryFinanza",e.note),e.$root.$emit("NoteDeliveryGeneral_refresh")})).catch((function(t){console.log("Malo",t),e.$q.loading.hide()}))}},mounted:function(){console.log(this.note)}},R=A,G=a("3b73"),U=a("4074"),Y=a("0170"),L=a("a370"),J=a("eb85"),H=Object(y["a"])(R,l,c,!1,null,null,null),K=H.exports;T()(H,"components",{QExpansionItem:G["a"],QItemSection:U["a"],QItemLabel:Y["a"],QCardSection:L["a"],QBtn:$["a"],QDialog:Q["a"],QCard:E["a"],QSeparator:J["a"]}),T()(H,"directives",{ClosePopup:M["a"]});var V={data:function(){return{}},components:{header_vel:r["a"],noteCard:K},computed:{delivery:{get:function(){return this.$store.getters["delivery/noteDeliveryGeneral"]}}},watch:{},methods:{ver:function(){this.$store.dispatch("delivery/getDeliveryGeneral")}},mounted:function(){var e=this;this.ver(),console.log(this.delivery),this.$root.$on("NoteDeliveryGeneral_refresh",(function(){e.ver()}))}},W=V,X=a("1c1c"),Z=Object(y["a"])(W,o,s,!1,null,null,null),ee=Z.exports;T()(Z,"components",{QList:X["a"]});var te={data:function(){return{}},components:{deliveryFinance:ee},methods:{inicialize:function(){}},mounted:function(){this.inicialize()}},ae=te,ne=a("9989"),ie=Object(y["a"])(ae,n,i,!1,null,null,null);t["default"]=ie.exports;T()(ie,"components",{QPage:ne["a"]})}}]);