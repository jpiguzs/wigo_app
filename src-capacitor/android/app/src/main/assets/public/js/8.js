(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"25d3":function(t,e,a){},b297:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("demands")],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header_vel",[t._v("\n        Requerimientos\n    ")]),a("tabs",{attrs:{sizeBtn:"md",FirstTabName:"Requerimiento",SecondTabName:"Historial"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}}),2===t.active?a("div",[a("div",{staticClass:"row"},[a("q-btn",{attrs:{label:"crear",icon:"add"},on:{click:function(e){t.showModal=!t.showModal}}}),a("filterDemand")],1),t.demands.length>0?a("q-list",{attrs:{dark:"",bordered:"",separator:""}},t._l(t.demands,(function(e,i){return 7!=e.step_id&&4!=e.step_id?a("demandsCard",{key:i,attrs:{demand:e}}):t._e()})),1):t._e()],1):t._e(),1===t.active?a("div",[a("q-list",{attrs:{dark:"",bordered:"",separator:""}},[t.demands.length>0?a("q-list",{attrs:{dark:"",bordered:"",separator:""}},t._l(t.demands,(function(e,i){return 7==e.step_id||4==e.step_id?a("demandsCard",{key:i,attrs:{demand:e}}):t._e()})),1):t._e()],1)],1):t._e(),a("q-dialog",{staticClass:"flex flex-center",attrs:{persistent:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("demandsForm")],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"full-width",staticStyle:{"min-width":"300px"}},[a("q-card-section",{staticClass:"flex flex-center"},[a("div",{staticClass:"text-h6 text-black"},[t._v(t._s(t.demands.id?"Ver":"Requerimiento"))])]),a("q-card-section",[t.showAddProduct?t._e():a("q-form",{staticClass:"aboo_form q-gutter-sm "},[a("div",[a("q-checkbox",{attrs:{"left-label":"",label:"Actividad"},model:{value:t.actividad,callback:function(e){t.actividad=e},expression:"actividad"}})],1),1==t.actividad?a("div",[a("div",[a("q-select",{attrs:{outlined:"","options-dark":"","use-input":"","label-color":"black",options:t.activity,"option-value":function(t){return Object(t)===t&&"id"in t?t.id:null},"option-label":function(t){return Object(t)===t&&"description"in t?t.description:"- Null -"},label:this.$permissions("config.externals")?"Actividad":"Descripcion","emit-value":"","map-options":""},on:{filter:t.filter_activities},scopedSlots:t._u([{key:"after",fn:function(){},proxy:!0},{key:"no-option",fn:function(){return[a("q-item",{staticClass:"bg-blue",attrs:{clickable:""},on:{click:function(e){t.showNewActivity=!t.showNewActivity}}},[a("q-item-section",{staticClass:"text-white bg-blue"},[t._v("\n                                        no hay resultados, haga click aqui si quiere agregar nuevo\n                                    ")])],1)]},proxy:!0}],null,!1,1756286757),model:{value:t.demands.activity_id,callback:function(e){t.$set(t.demands,"activity_id",e)},expression:"demands.activity_id"}})],1)]):t._e(),0==t.actividad?a("div",[a("q-input",{attrs:{outlined:"",label:"Descripcion"},model:{value:t.textActividad,callback:function(e){t.textActividad=e},expression:"textActividad"}})],1):t._e(),t.actividad?a("div",{staticClass:"q-gutter-sm"},[a("q-radio",{attrs:{val:1,label:"Item"},model:{value:t.demands.type,callback:function(e){t.$set(t.demands,"type",e)},expression:"demands.type"}}),a("q-radio",{attrs:{val:2,label:"servicios"},model:{value:t.demands.type,callback:function(e){t.$set(t.demands,"type",e)},expression:"demands.type"}})],1):t._e(),a("div",{staticClass:"q-gutter-sm"},[a("q-checkbox",{attrs:{val:1,label:"Urgente"},model:{value:t.demands.priority,callback:function(e){t.$set(t.demands,"priority",e)},expression:"demands.priority"}}),t.demands.priority?a("q-input",{attrs:{outlined:"",type:"textarea",label:"Justificacion","label-color":"black"},model:{value:t.demands.justification,callback:function(e){t.$set(t.demands,"justification",e)},expression:"demands.justification"}}):t._e()],1),a("div",{staticClass:"text-black"},[t._v("\n                    Items\n                    "),t.showIcon?a("q-btn",{ref:"btnAdd",staticClass:"bg-blue",attrs:{rounded:"",icon:"add"},on:{click:function(e){t.showAddProduct=!t.showAddProduct}}}):t._e(),a("div",[t.new_materials.length>0?a("q-list",{staticStyle:{"max-width":"318px"},attrs:{bordered:"",separator:""}},t._l(t.new_materials,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""},on:{click:function(e){return t.SetToEdit(i)}}},[a("q-item-section",[t._v(" "+t._s(e.name?e.name:e[0].name)+", "+t._s(e.quantity?e.quantity:e[0].quantity))]),t.showIcon?a("q-item-section",[a("q-btn",{attrs:{flat:"",icon:"delete"}})],1):t._e()],1)})),1):t._e()],1)],1),a("div")]),t.showAddProduct&&!1===t.showAddProductNew?a("div",[t.inputShow?t._e():a("q-input",{attrs:{outlined:"",clearable:"",type:"text",label:"Descripcion"},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}}),t.inputShow?a("q-select",{attrs:{clearable:"","bg-color":"white",outlined:"",options:t.inventories_filter,"option-value":function(t){return Object(t)===t&&"id"in t?t.id:null},"option-label":function(t){return Object(t)===t&&"name"in t?t.name:""},"use-input":"",label:"Item"},on:{filter:t.filter_invetories},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",{staticClass:"bg-blue",attrs:{clickable:""},on:{click:function(e){t.inputShow=!t.inputShow}}},[a("q-item-section",{staticClass:"text-white bg-blue"},[t._v("\n                                no hay resultados, haga click aqui si quiere agregar nuevo\n                            ")])],1)]},proxy:!0}],null,!1,3880082529),model:{value:t.materials_id,callback:function(e){t.materials_id=e},expression:"materials_id"}}):t._e(),a("q-select",{attrs:{clearable:"","bg-color":"white",outlined:"",options:t.measure_filter,"option-value":function(t){return Object(t)===t&&"id"in t?t.id:null},"option-label":function(t){return Object(t)===t&&"measure"in t?t.measure:""},"emit-value":"","map-options":"",label:"Unidades de Medida"},model:{value:t.measure_id,callback:function(e){t.measure_id=e},expression:"measure_id"}}),a("q-input",{attrs:{outlined:"",type:"number",label:"Cantidad"},model:{value:t.productNr,callback:function(e){t.productNr=e},expression:"productNr"}}),a("q-btn",{staticClass:"primary full-width",attrs:{label:"agregar",color:"primary"},on:{click:t.set_materials}}),a("q-btn",{staticClass:"btn-danger full-width",attrs:{label:"Cancelar",color:"red"},on:{click:function(e){t.showAddProduct=!t.showAddProduct}}})],1):t._e()],1),t.showAddProduct?t._e():a("q-card-actions",{attrs:{align:"right"}},[t.showIcon?a("q-btn",{attrs:{flat:"",label:t.demands._id?"Actualizar":"guardar",color:"green",loading:t.loading},on:{click:function(e){return t.store()}}}):t._e(),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cerrar",color:"primary"}})],1)],1),a("q-dialog",{model:{value:t.showNewActivity,callback:function(e){t.showNewActivity=e},expression:"showNewActivity"}},[a("activityForm",{attrs:{des:t.textActividad}})],1)],1)},d=[],l=(a("7db0"),a("4de4"),a("b0c0"),a("a4d3"),a("e01a"),a("c740"),a("31f7")),c=(a("98e4"),{name:"FormDemands",data:function(){return{show:!1,inputShow:!0,discipline:[],loading:!1,showAddProduct:!1,showAddProductNew:!1,productName:null,productNr:null,materials_id:null,actividad:!1,textActividad:"",new_materials:[],inventories:[],measures:[],measure_id:null,measure_filter:[],inventories_filter:[],showIcon:!0,activity:[],showNewActivity:!1,activity_back:[],descriptionGeneral:""}},components:{activityForm:l["a"]},watch:{productName:function(t){null===t&&(this.inputShow=!0)},materials_id:function(t){console.log(t.id);var e=this.inventories.find((function(e){return e.id===t.id}));console.log(e,"sadas"),e&&(this.measure_id=e.measure_id)}},props:{demands:{type:Object,default:function(){return{id:null,description:null,control_number:null,type:1,materials:[],new_materials:[],priority:!1,justication:null,activity_id:null}}}},methods:{getdiscipline:function(){var t=this;this.$q.loading.show(),axios.get("/demand/get_inventories").then((function(e){t.$q.loading.hide(),console.log(e),t.measures=e.data.measures,t.inventories=e.data.inventories,t.measure_filter=e.data.measures})).catch((function(e){console.log(e),t.$q.loading.hide()}))},getActivity:function(){var t=this;this.$q.loading.show(),axios.get("/activity/index").then((function(e){t.$q.loading.hide(),console.log(e),t.activity=e.data,t.activity_back=e.data})).catch((function(e){console.log(e),t.$q.loading.hide()}))},filter_invetories:function(t,e,a){var i=this;this.productName=t,t.length<2?a():e((function(){var e=t.toLowerCase();i.inventories_filter=i.inventories.filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))}))},filter_activities:function(t,e,a){var i=this;console.log(t),this.textActividad="",this.textActividad=t,t.length<2?a():e((function(){var e=t.toLowerCase();i.activity=i.activity_back.filter((function(t){return t.description.toLowerCase().indexOf(e)>-1}))}))},filter_measure:function(t,e){var a=this;e((function(){var e=t.toLowerCase();a.measure_filter=a.measures.filter((function(t){return t.name.toLowerCase().indexOf(e)>-1}))}))},set_materials:function(){if(this.inputShow){var t={item_id:this.materials_id.id,name:this.materials_id.name,measure_id:this.measure_id,quantity:this.productNr},e=this.new_materials.findIndex((function(e){return e.item_id===t.item_id}));-1===e?(this.demands.materials.push(t),this.new_materials.push(t),this.productName=null,this.measure_id=null,this.productNr=null,this.showAddProductNew=!1,this.showAddProduct=!1,this.materials_id=[]):(this.new_materials[e].quantity=this.productNr,this.demands.materials[e].quantity=this.productNr,this.productName=null,this.measure_id=null,this.productNr=null,this.showAddProductNew=!1,this.showAddProduct=!1,this.materials_id=[])}else this.set_new_materials()},set_new_materials:function(){var t={item_id:0,name:this.productName,measure_id:this.measure_id,quantity:this.productNr};this.new_materials.push(t),this.demands.new_materials.push(t),this.productName=null,this.measure_id=null,this.productNr=null,this.showAddProductNew=!1,this.showAddProduct=!1},showNewProduct:function(){this.showAddProductNew=!0,this.showAddProduct=!1},store:function(){this.demands.id?this.update():this.create()},create:function(){var t=this;this.demands.description=this.textActividad,this.$q.loading.show(),this.$store.dispatch("demands/store",this.demands).then((function(e){t.$q.loading.hide(),t.$q.notify({message:"Guardado con exitos",color:"green",position:"right"}),t.$root.$emit("demands_refresh")})).catch((function(t){console.log(t)}))},update:function(){var t=this;this.$q.loading.show(),axios.put("/demands/"+this.demands.id,this.demands).then((function(e){t.$q.loading.hide(),t.$q.notify({message:"actualizado con exitos",color:"green",position:"right"}),t.$root.$emit("demands_refresh")})).catch((function(t){console.log(t)}))},addProduct:function(){if(!this.productName)return this.$q.notify({message:"coloque una descripcion",color:"red",position:"right"});var t={name:this.productName,quantity:this.productNr,complete:!1};this.demands.products.push(t),this.showAddProduct=!1,this.productName=null,this.productNr=null},SetToEdit:function(t){var e=this;console.log(this.new_materials[t]),this.measure_id=this.new_materials[t].measure_id,this.materials_id=this.inventories.find((function(a){return a.id===e.new_materials[t].item_id})),this.productNr=this.new_materials[t].quantity,this.$refs.btnAdd.click()}},mounted:function(){var t=this;this.getdiscipline(),this.getActivity(),this.$root.$on("new_activity",(function(e){t.activity.push(e),t.demands.activity_id=e.id,t.showNewActivity=!1}))}}),u=c,m=a("2877"),p=a("f09f"),h=a("a370"),v=a("0378"),f=a("8f8e"),_=a("ddd8"),b=a("9c40"),w=a("66e5"),q=a("4074"),g=a("27f9"),y=a("3786"),C=a("1c1c"),x=a("4b7e"),k=a("24e8"),$=a("714f"),S=a("7f67"),N=a("eebe"),Q=a.n(N),A=Object(m["a"])(u,r,d,!1,null,null,null),M=A.exports;Q()(A,"components",{QCard:p["a"],QCardSection:h["a"],QForm:v["a"],QCheckbox:f["a"],QSelect:_["a"],QBtn:b["a"],QItem:w["a"],QItemSection:q["a"],QInput:g["a"],QRadio:y["a"],QList:C["a"],QCardActions:x["a"],QDialog:k["a"]}),Q()(A,"directives",{Ripple:$["a"],ClosePopup:S["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"  item-vel ",attrs:{clickable:""}},[1===t.demand.priority?a("div",{staticClass:"ribbon slant-down up",staticStyle:{"--color":"red"}},[a("div",{staticClass:"content"},[a("q-icon",{attrs:{name:"priority_high"}})],1)]):t._e(),t.hiddenNotifi?a("notificationsCounterForIten",{attrs:{url:"demands",num:t.demand.id,cargarNotifi:7}}):t._e(),a("q-item-section",{staticClass:"content_item "},[a("q-item-label",[t._v(t._s(t.demand.control_number)+".")]),a("q-item-label",[t._v(t._s(t.demand.description)+".")]),a("q-item-label",[t._v("Solicitante: "+t._s(t.demand.request_user.name)+"  "+t._s(t.demand.request_user.last_name)+".")]),a("q-item-label",[t._v("Departamento:"+t._s(t.demand.request_user.department.name)+".")]),a("q-item-label",[t._v(t._s(t.demand.step.step)+".")])],1),a("q-btn",{ref:"view"+t.demand.id,attrs:{flat:"",dense:"",icon:"visibility"},on:{click:function(e){t.showForm=!t.showForm}}})],1),a("q-dialog",{staticClass:"flex flex-center",attrs:{maximized:t.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[a("demandView",{attrs:{demand:t.demand}})],1),a("q-dialog",{staticClass:"flex flex-center",attrs:{persistent:"",maximized:t.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.showStep,callback:function(e){t.showStep=e},expression:"showStep"}},[a("step",{attrs:{demand:t.demand}})],1),t._v("edit pdf with node express\n\n  "),a("q-dialog",{model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("deleteModal",{attrs:{id:t.demand._id}})],1)],1)},D=[],j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("My component")])},O=[],F={data:function(){return{}}},I=F,B=Object(m["a"])(I,j,O,!1,null,null,null),T=B.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"Step"},[a("q-card-section",{staticClass:"bg-red-5 text-white text-center"},[a("div",{staticClass:"text-h6"},[t._v("Steps")])]),a("q-separator"),a("q-card-section",[a("div",[a("q-select",{attrs:{outlined:"","options-dark":"","label-color":"black",options:t.steps,"option-value":function(t){return Object(t)===t&&"id"in t?t.id:null},"option-label":function(t){return Object(t)===t&&"step"in t?t.step:"- Null -"},label:"Steps","emit-value":"","map-options":""},model:{value:t.demand.step_id,callback:function(e){t.$set(t.demand,"step_id",e)},expression:"demand.step_id"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{staticClass:"text-blue",attrs:{flat:""},on:{click:function(e){return t.changeStep()}}},[t._v("Actualizar")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-red",attrs:{flat:""}},[t._v("Cancelar")])],1)],1)],1)},E=[],R={name:"Step",data:function(){return{}},props:["demand"],computed:{steps:{get:function(){return this.$store.getters["steps/steps"]}}},methods:{changeStep:function(){var t=this;this.$store.dispatch("demands/updateStep",this.demand).then((function(e){t.$q.notify({message:"Step Actualizado con exitos",color:"green",position:"right"}),t.$root.$emit("demandCard_refresh")})).catch((function(t){console.log(t)}))}},mounted:function(){console.log("Step",this.demand)}},L=R,V=a("eb85"),J=Object(m["a"])(L,z,E,!1,null,null,null),G=J.exports;Q()(J,"components",{QCard:p["a"],QCardSection:h["a"],QSeparator:V["a"],QSelect:_["a"],QCardActions:x["a"],QBtn:b["a"]}),Q()(J,"directives",{ClosePopup:S["a"]});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upper"},[a("q-card",[a("q-bar",{staticClass:"bg-primary "},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),a("q-card-section",{staticClass:"bg-primary text-white text-center text-h6"},[1===t.demand.priority?a("div",{staticClass:"ribbon slant-down up",staticStyle:{"--color":"red"}},[a("div",{staticClass:"content"},[a("q-icon",{attrs:{name:"priority_high"}})],1)]):t._e(),t._v("\n            \n            Nº de control : "+t._s(t.demand.control_number)+" \n\n        \n      ")]),6===t.demand.step_id?a("q-card-section",[t.$permissions("demands.approved")?a("BtnStatus",{attrs:{demand:t.demand}}):t._e()],1):t._e(),a("q-separator",{attrs:{color:"primary"}}),a("q-card-section",{staticClass:"text-primary row"},[a("div",{staticClass:"col-6 border-primary"},[a("div",[t._v("Fecha de requerimiento:")]),a("div",[t._v(t._s(t.formated(t.demand.created_at)))])]),a("div",{staticClass:"col-6 border-primary"},[a("div",[t._v("Solicitante:")]),a("div",[t._v(t._s(t.demand.request_user.name)+" , "+t._s(t.demand.request_user.last_name)+" ")])])]),a("q-separator",{attrs:{color:"primary"}}),a("q-card-section",{staticClass:"text-primary row"},[a("div",{staticClass:"col-6 border-primary"},[a("div",[t._v("Departamento:")]),a("div",[t._v(t._s(t.demand.request_user.department.name))])]),a("div",{staticClass:"col-6 border-primary"},[a("div",[t._v("estatus:")]),a("div",[t._v(t._s(t.demand.step.step))])])]),a("q-separator",{attrs:{color:"primary"}}),a("q-card-section",{staticClass:"text-primary"},[a("div",[t._v("Descripción de la solicitud:")]),a("div",[t._v(t._s(t.demand.description))])]),a("q-separator",{attrs:{color:"primary"}}),a("q-card-section",{staticClass:"text-primary text-h6 text-center"},[a("div",[a("q-icon",{staticStyle:{"font-size":"1em","padding-right":"0.2em"},attrs:{name:"construction"}}),a("span",[t._v("Materiales")])],1)]),a("q-card-section",{staticClass:"q-pa-none"},[a("table",{staticClass:"full-width"},[a("thead",[a("th",[t._v("descripciòn")]),a("th",[t._v("Cantidad")]),a("th")]),a("tbody",t._l(t.demand.materials,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",[a("materialDetails",{attrs:{material:e}})],1)])})),0)])])],1)],1)},H=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{label:"Ver detalles",push:"",color:"primary"},on:{click:function(e){t.showModal=!t.showModal}}}),a("q-dialog",{model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("q-card",[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),a("q-card-section",{staticClass:"text-primary text-h6 text-center"},[t._v("\n          "+t._s(t.material.name)+"\n      ")]),a("q-separator",{attrs:{color:"primary"}}),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[t._v("\n          Cantidad Solicitada: "+t._s(t.material.quantity)+"\n        ")]),a("div",{staticClass:"col-4"},[t._v("\n            Status: "+t._s(t.material.status.name)+"\n        ")])])]),a("q-separator",{attrs:{color:"primary"}}),t.material.applicants_winner.length>0?a("q-card-section",{staticClass:"text-h6 text-center"},[t._v("\n          Proveedores \n    ")]):t._e(),a("q-separator",{attrs:{color:"primary"}}),t._l(t.material.applicants_winner,(function(e,i){return t.material.applicants_winner.length>0?a("q-card-section",{key:i},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[t._v("\n          Proveedor : "+t._s(e.supplier.name)+"\n        ")]),a("div",{staticClass:"col-4"},[t._v("\n            Cantidad: "+t._s(e.quantity)+"\n        ")]),a("div",{staticClass:"col-4"},[t._v("\n            Precio: "+t._s(e.price)+"\n        ")]),t._l(e.order,(function(e,i){return a("div",{key:i,staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[t._v("\n                numero de orden #00"+t._s(e.id)+" \n              ")]),a("div",{staticClass:"col-6"},[t._v("\n                  Status: "+t._s(!0===e.paid?"pagada":"Pendiente por pagar")+"\n              ")])])])})),a("q-separator",{attrs:{color:"primary"}})],2)]):t._e()}))],2)],1)],1)},W=[],X={data:function(){return{showModal:!1}},props:["material"]},Y=X,Z=a("d847"),tt=a("2c91"),et=a("05c0"),at=Object(m["a"])(Y,K,W,!1,null,null,null),it=at.exports;Q()(at,"components",{QBtn:b["a"],QDialog:k["a"],QCard:p["a"],QBar:Z["a"],QSpace:tt["a"],QTooltip:et["a"],QCardSection:h["a"],QSeparator:V["a"]}),Q()(at,"directives",{ClosePopup:S["a"]});var nt=a("8d47"),st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticClass:"glossy",attrs:{outline:"",label:"aprobar",color:"green",icon:"done_all"},on:{click:function(e){return t.changeStatus(1)}}}),a("q-btn",{staticClass:"glossy",attrs:{label:"rechazar",outline:"",color:"red",icon:"block"},on:{click:function(e){return t.changeStatus(2)}}})],1)},ot=[],rt={data:function(){return{}},props:["demand"],methods:{changeStatus:function(t){var e=this;this.$q.loading.show();var a=1===t?"approved":"reject";axios.patch("/demand/"+a+"/"+this.demand.id,this.demand).then((function(t){e.$q.loading.hide(),e.$root.$emit("demands_refresh"),e.$store.commit("auth/remove_notifications_demands",e.demand.id),e.$root.$emit("hiddenBaget")})).catch((function(t){console.log(t)}))}}},dt=rt,lt=Object(m["a"])(dt,st,ot,!1,null,null,null),ct=lt.exports;Q()(lt,"components",{QBtn:b["a"]});var ut={data:function(){return{}},props:["demand"],components:{materialDetails:it,BtnStatus:ct},methods:{formated:nt["a"]}},mt=ut,pt=(a("d2f8"),a("0016")),ht=Object(m["a"])(mt,U,H,!1,null,null,null),vt=ht.exports;Q()(ht,"components",{QCard:p["a"],QBar:Z["a"],QSpace:tt["a"],QBtn:b["a"],QTooltip:et["a"],QCardSection:h["a"],QIcon:pt["a"],QSeparator:V["a"]}),Q()(ht,"directives",{ClosePopup:S["a"]});var ft=a("e93a"),_t={name:"CardDemands",data:function(){return{showForm:!1,showDelete:!1,showStep:!1,showIcon:!0,maximizedToggle:!0,hiddenNotifi:!0,color:"yellow",icon:"fact_check"}},components:{demandForm:M,deleteModal:T,step:G,demandView:vt,notificationsCounterForIten:ft["a"]},props:["demand"],methods:{statusStep:function(){switch(this.demand.step_id){case 1:this.color="yellow",this.icon="fact_check";break;case 2:this.color="secondary",this.icon="screen_share";break;case 3:this.showIcon=!1,this.color="positive",this.icon="done_all";break}}},mounted:function(){var t=this;this.statusStep(),this.$root.$on("close_delete",(function(){t.showDelete=!1})),this.$root.$on("hiddenBaget",(function(){console.log("Ocultar baget "),t.hiddenNotifi=!1,t.showForm=!1})),this.$root.$on("demandCard_refresh",(function(){t.showStep=!1,t.statusStep()})),this.$route.params.id&&this.$nextTick((function(){t.$refs["view"+t.$route.params.id].click()}))}},bt=_t,wt=a("0170"),qt=Object(m["a"])(bt,P,D,!1,null,null,null),gt=qt.exports;Q()(qt,"components",{QItem:w["a"],QIcon:pt["a"],QItemSection:q["a"],QItemLabel:wt["a"],QBtn:b["a"],QDialog:k["a"]}),Q()(qt,"directives",{Ripple:$["a"]});var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"full-width",staticStyle:{"min-width":"300px"}},[a("q-card-section",[a("div",[a("q-input",{staticClass:"q-ml-md",attrs:{filled:"",label:"Numero de Control","input-class":"text-right"},scopedSlots:t._u([{key:"append",fn:function(){return[""===t.demand.control_number?a("q-icon",{attrs:{name:"search"}}):a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"search"},on:{click:function(e){return t.searchNumControl()}}})]},proxy:!0}]),model:{value:t.demand.control_number,callback:function(e){t.$set(t.demand,"control_number",e)},expression:"demand.control_number"}})],1)])],1),t.showMatarial?a("q-card",{staticClass:"full-width",staticStyle:{"min-width":"300px"}},[a("q-card-section",[a("q-list",{attrs:{dark:"",bordered:"",separator:""}},t._l(this.demand.materials,(function(t,e){return a("demandCardReturn",{key:e,attrs:{material:t}})})),1)],1)],1):t._e()],1)},Ct=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"item-vel full-width",attrs:{clickable:""}},[a("div",{staticClass:"row full-width"},[a("div",{staticClass:"col-3"},[a("q-item-section",[t._v(" "+t._s("Nombre : ")+" "+t._s(t.material.inventory.name?t.material.inventory.name:""))])],1),a("div",{staticClass:"col-3"},[a("q-item-section",[t._v(t._s("Cantidad : ")+" "+t._s(t.material.inventory.quantity))])],1),a("div",{staticClass:"col-3"},[a("q-item-section",[t._v(t._s("Medida : ")+" "+t._s(t.material.measure.measure))])],1),a("div",{staticClass:"col-3"},[a("q-item-section",[t._v(t._s("Muerto : ")+" "+t._s(t.material.inventory.dead))])],1),a("div",{staticClass:"col-3"},[a("q-btn",{attrs:{flat:"",dense:"",icon:"edit"},on:{click:function(e){t.showForm=!t.showForm}}})],1)])]),a("q-dialog",{model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}})],1)},kt=[],$t={data:function(){return{showForm:!1,showDelete:!1}},props:["material"],components:{},methods:{},mounted:function(){}},St=$t,Nt=Object(m["a"])(St,xt,kt,!1,null,null,null),Qt=Nt.exports;Q()(Nt,"components",{QItem:w["a"],QItemSection:q["a"],QBtn:b["a"],QDialog:k["a"]}),Q()(Nt,"directives",{Ripple:$["a"]});var At={name:"FormDemandReturn",data:function(){return{loading:!1,showMatarial:!1}},components:{demandCardReturn:Qt},watch:{},props:{demand:{type:Object,default:function(){return{control_number:null,materials:[]}}}},methods:{searchNumControl:function(){var t=this;this.$store.dispatch("demands/searchDemands",this.demand).then((function(e){console.log(e.data),0==e.data.length?t.$q.notify({message:"No se encontro resultado",color:"red",position:"right"}):(t.showMatarial=!0,t.demand.materials=e.data[0].materials)})).catch((function(t){console.log(t)}))}},mounted:function(){}},Mt=At,Pt=Object(m["a"])(Mt,yt,Ct,!1,null,null,null),Dt=Pt.exports;Q()(Pt,"components",{QCard:p["a"],QCardSection:h["a"],QInput:g["a"],QIcon:pt["a"],QList:C["a"]});var jt=a("d784d"),Ot=a("4819"),Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"sort"},on:{click:function(e){t.showModal=!t.showModal}}}),a("q-dialog",{model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("q-card",{staticClass:"full-width",staticStyle:{"min-width":"300px"}},[a("q-select",{attrs:{filled:"",options:t.options,label:"filtros"},model:{value:t.fillerType,callback:function(e){t.fillerType=e},expression:"fillerType"}})],1)],1)],1)},It=[],Bt={data:function(){return{showModal:!1,fillerType:null,options:[{label:"Prioridad",value:1,description:"Search engine",category:"1"},{label:"Mas reciente",value:2,description:"Social media",category:"1"},{label:"Mas Antiguo",value:3,description:"Quick updates",category:"2"},{label:"En proceso",value:4,description:"iStuff",category:"2"},{label:"Material Pendiente",value:5,description:"Databases",category:"3"}]}},watch:{fillerType:function(t,e){console.log(t),this.$store.commit("demands/filter",t.value)}}},Tt=Bt,zt=Object(m["a"])(Tt,Ft,It,!1,null,null,null),Et=zt.exports;Q()(zt,"components",{QBtn:b["a"],QDialog:k["a"],QCard:p["a"],QSelect:_["a"]});var Rt={data:function(){return{showModal:!1,maximizedToggle:!0,active:2}},components:{demandsForm:M,demandsCard:gt,header_vel:jt["a"],tabs:Ot["a"],demandReturn:Dt,filterDemand:Et},computed:{demands:{get:function(){return this.$store.getters["demands/demands"]}}},methods:{},mounted:function(){var t=this;this.$root.$on("demands_refresh",(function(){t.$store.dispatch("demands/getDemands"),t.showModal=!1})),console.log(this.$route)}},Lt=Rt,Vt=Object(m["a"])(Lt,s,o,!1,null,null,null),Jt=Vt.exports;Q()(Vt,"components",{QBtn:b["a"],QList:C["a"],QDialog:k["a"]});var Gt={name:"PageDemands",data:function(){return{}},components:{demands:Jt},methods:{inicialize:function(){this.$store.dispatch("demands/getDemands"),this.$store.dispatch("measures/getMeasures"),this.$store.dispatch("steps/getSteps")}},mounted:function(){this.inicialize()}},Ut=Gt,Ht=a("9989"),Kt=Object(m["a"])(Ut,i,n,!1,null,null,null);e["default"]=Kt.exports;Q()(Kt,"components",{QPage:Ht["a"]})},d2f8:function(t,e,a){"use strict";a("25d3")}}]);