(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"0497":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("delivery")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header_vel",[t._v("\n    Retiro Material\n")]),a("div",[a("q-list",{staticClass:"text-black",attrs:{dark:"",bordered:"",separator:""}},t._l(t.delivery,(function(e,s){return 1==e.status?a("noteCard",{key:s,attrs:{note:e}}):t._e()})),1)],1)],1)},n=[],r=a("d784d"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-expansion-item",{attrs:{"expand-separator":"","header-class":"bg-grey-13 text-white q-mt-sm"},scopedSlots:t._u([{key:"header",fn:function(){return[a("q-item-section",[a("q-item-label",{staticClass:"text-black"},[t._v("Numero de Control : "),a("strong",[t._v(t._s(t.note.demand.control_number))])]),a("q-item-label",{staticClass:"text-black"},[t._v("Descripcion : "+t._s(t.note.demand.description))]),a("q-item-label",{staticClass:"text-black"},[t._v("Solicitado por : "),a("span",{},[a("strong",[t._v(" "+t._s(t.note.user.name)+" "+t._s(t.note.user.last_name)+" ")])])]),a("q-item-label",{staticClass:"text-black"},[t._v("Fecha :"),a("span",{},[a("strong",[t._v(" "+t._s(t._f("formatDate")(t.note.created_at))+" ")])])]),a("q-item-label",{staticClass:"text-black"},[t._v("Hora :"),a("span",{},[a("strong",[t._v(" "+t._s(t._f("formatTime")(t.note.created_at))+" ")])])]),a("q-item-label",{staticClass:"text-black"},[t._v("Estatus :"),a("span",{},[a("strong",[t._v(" "+t._s(1==t.note.status?"Pendiente":"Retiro Confirmado")+" ")])])])],1)]},proxy:!0}])},[a("q-card",[a("q-card-section",[a("q-table",{attrs:{title:"Materiales",data:t.rows,columns:t.columns,"row-key":"materialId","no-data-label":"Sin Resultado",separator:"vertical"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[2!=t.note.status?a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Confirmar"},on:{click:function(e){t.showModalQuantity=!t.showModalQuantity}}}):t._e()],1)])],1)],1)],1),a("q-dialog",{staticClass:"flex flex-center",attrs:{persistent:""},model:{value:t.showModalQuantity,callback:function(e){t.showModalQuantity=e},expression:"showModalQuantity"}},[a("q-card",{staticClass:"modal-card"},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-subtitle2"},[t._v("Confirmar")])]),a("q-separator"),a("q-card-section",[a("q-form",{staticClass:"aboo_form q-gutter-sm"},[a("div",{staticClass:"text-center"},[a("strong",[t._v("Confirma estos materiales? ")])])])],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Confirmo"},on:{click:t.saveNoteDelivery}})],1),a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"aboo_btn  bg-red-4 full-width",attrs:{label:"Cancelar"}})],1)])],1)],1)],1)},c=[],d=(a("ac1f"),a("1276"),a("159b"),a("b0c0"),a("bd4c")),u={data:function(){return{columns:[],rows:[],showModalQuantity:!1,maximizedToggle:!0,disable:!0}},computed:{},props:["note"],filters:{formatDate:function(t){var e=t.split("T"),a=e[0].split("-"),s=new Date(a[0],a[1],a[2]);return d["a"].formatDate(s,"DD-MM-YYYY")},formatTime:function(t){var e=t.split("T"),a=e[1].split(":"),s=new Date(a[0],a[1]);return d["a"].formatDate(s,"hh:mm:ss A")}},methods:{columRow:function(){this.columns=[],this.rows=[],this.columns=[{name:"material",label:"Materiales",align:"center",field:"material",sortable:!0},{name:"quantity",label:"Cantidad",align:"center",field:"quantity",sortable:!0}];var t=this;this.note.materiales.forEach((function(e){var a={material:e.name,quantity:e.quantity,materialId:e.id,noteId:t.note.id};t.rows.push(a)}))},saveNoteDelivery:function(){var t=this;console.log("Entro aquiiiii"),console.log(this.rows),this.$q.loading.show(),this.$store.dispatch("delivery/saveNoteDelivery",this.rows).then((function(e){t.$q.loading.hide(),t.$q.notify({message:"Material retirado confirmado",color:"green",position:"right"}),t.showModalQuantity=!1,t.$root.$emit("NoteDelivery_refresh")})).catch((function(t){console.log(t)}))}},mounted:function(){console.log(this.note),this.columRow(),console.log(this.rows)}},m=u,v=a("2877"),f=a("3b73"),h=a("4074"),p=a("0170"),b=a("f09f"),_=a("a370"),g=a("eaac"),q=a("9c40"),w=a("24e8"),y=a("eb85"),C=a("0378"),x=a("7f67"),Q=a("eebe"),D=a.n(Q),k=Object(v["a"])(m,l,c,!1,null,null,null),M=k.exports;D()(k,"components",{QExpansionItem:f["a"],QItemSection:h["a"],QItemLabel:p["a"],QCard:b["a"],QCardSection:_["a"],QTable:g["a"],QBtn:q["a"],QDialog:w["a"],QSeparator:y["a"],QForm:C["a"]}),D()(k,"directives",{ClosePopup:x["a"]});var $={data:function(){return{}},components:{header_vel:r["a"],noteCard:M},computed:{delivery:{get:function(){return this.$store.getters["delivery/noteDelivery"]}}},watch:{},methods:{ver:function(){console.log(this.delivery),this.$store.dispatch("delivery/getDelivery")}},mounted:function(){var t=this;this.ver(),this.$root.$on("NoteDelivery_refresh",(function(){t.ver()}))}},E=$,I=a("1c1c"),N=Object(v["a"])(E,i,n,!1,null,null,null),S=N.exports;D()(N,"components",{QList:I["a"]});var T={name:"PageInventory",data:function(){return{}},components:{delivery:S},methods:{inicialize:function(){}},mounted:function(){this.inicialize()}},R=T,P=a("9989"),Y=Object(v["a"])(R,s,o,!1,null,null,null);e["default"]=Y.exports;D()(Y,"components",{QPage:P["a"]})}}]);