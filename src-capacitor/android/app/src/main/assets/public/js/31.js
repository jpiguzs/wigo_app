(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"90d6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("deliveryCompra")],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header_vel",[t._v("\n    Nota de Compra\n")]),a("div",[a("q-list",{staticClass:"text-black",attrs:{dark:"",bordered:"",separator:""}},t._l(t.delivery,(function(e,o){return"po"===e.module&&1==e.status?a("noteCard",{key:o,attrs:{note:e}}):t._e()})),1)],1)],1)},n=[],r=a("d784d"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-expansion-item",{attrs:{"expand-separator":"","header-class":"item-vel bg-blue-grey-11 text-blue"},scopedSlots:t._u([{key:"header",fn:function(){return[a("q-item-section",[t.hiddenNotifi?a("notificationsCounterForIten",{attrs:{url:"note_delivery_compra",num:t.note.purchase_order.id,cargarNotifi:4}}):t._e(),a("q-item-label",{staticClass:"text-black"},[t._v("Orden de Compra N # : "),a("strong",[t._v(" "+t._s(t.formatId(t.note.purchase_order.id)))])]),a("q-item-label",{staticClass:"text-black"},[t._v("Fecha :"),a("span",{},[a("strong",[t._v(" "+t._s(t._f("formatDate")(t.note.created_at))+" ")])])]),a("q-item-label",{staticClass:"text-black"},[t._v("Hora :"),a("span",{},[a("strong",[t._v(" "+t._s(t._f("formatTime")(t.note.created_at)))])])]),a("q-item-label",{staticClass:"text-black"},[t._v("Proveedor :"),a("span",{},[a("strong",[t._v(" "+t._s(t.note.purchase_order.supplier.name))])])]),1==t.note.status?a("q-item-label",{staticClass:"text-black"},[t._v("Estatus :"),a("span",{},[a("strong",[t._v(" "+t._s("Pendiente")+" ")])])]):t._e(),2==t.note.status?a("q-item-label",{staticClass:"text-black"},[t._v("Estatus :"),a("span",{},[a("strong",[t._v(" "+t._s("Retirado de "+t.note.purchase_order.supplier.name)+" ")])])]):t._e()],1)]},proxy:!0}])},[a("q-card-section",{staticClass:"q-mt-md"},[a("q-table",{attrs:{title:"Materiales",data:t.rows,columns:t.columns,"row-key":"materialId","no-data-label":"Sin Resultado",separator:"vertical"}}),1==t.note.status?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-pa-sm"},[a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Retirar en "+t.note.purchase_order.supplier.name},on:{click:function(e){return t.deleteNotificacion(t.note.purchase_order.id)}}})],1)]):t._e()],1)],1),a("q-dialog",{staticClass:"flex flex-center",attrs:{persistent:""},model:{value:t.showModalQuantity,callback:function(e){t.showModalQuantity=e},expression:"showModalQuantity"}},[a("q-card",{staticClass:"modal-card"},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-subtitle2"},[t._v("Confirmar")])]),a("q-separator"),a("div",{staticClass:"row"},[a("div",{staticClass:"text-center"},[a("strong",[t._v("Retiras estos materiales?")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{staticClass:"aboo_btn bg-green full-width",attrs:{label:"Confirmar"},on:{click:t.retirarTienda}})],1),a("div",{staticClass:"col-6 q-pa-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"aboo_btn  bg-red-4 full-width",attrs:{label:"Cancelar"}})],1)])],1)],1)],1)},c=[],d=(a("ac1f"),a("1276"),a("159b"),a("b0c0"),a("bd4c")),u=(a("3898"),a("e93a")),m={data:function(){return{columns:[],rows:[],showModalQuantity:!1,maximizedToggle:!0,disable:!0,hiddenNotifi:!0}},components:{notificationsCounterForIten:u["a"]},computed:{},props:["note"],filters:{formatDate:function(t){var e=t.split("T"),a=e[0].split("-"),o=new Date(a[0],a[1],a[2]);return d["a"].formatDate(o,"DD-MM-YYYY")},formatTime:function(t){var e=t.split("T"),a=e[1].split(":"),o=new Date(a[0],a[1]);return d["a"].formatDate(o,"hh:mm:ss A")}},methods:{formatId:function(t){for(var e=String(t),a="#",o=4-e.length,i=0;i<o;i++)a+="0";return a+e},deleteNotificacion:function(t){this.showModalQuantity=!0,this.$store.commit("auth/remove_notifications_NoteDeliveryCompra",t),this.hiddenNotifi=!1},columRow:function(){this.columns=[],this.rows=[],this.columns=[{name:"material",label:"Materiales",align:"center",field:"material",sortable:!0},{name:"quantity",label:"Cantidad",align:"center",field:"quantity",sortable:!0}];var t=this;this.note.purchase_order.applicants.forEach((function(e){var a={material:e.material.name,quantity:e.material.quantity,materialId:e.material.id,noteId:t.note.id};t.rows.push(a)}))},retirarTienda:function(){var t=this,e={note_id:this.note.id,order_id:this.note.purchase_order.id,status_note:2,status_po:3};this.$q.loading.show(),axios.post("delivery/retirarTienda/",e).then((function(e){t.$q.notify({message:"Se retiro de la tienda con Exito",color:"green"}),t.$q.loading.hide(),t.showModalQuantity=!1,t.$store.commit("delivery/changerStatusDeliveryTienda",t.note),t.$root.$emit("NoteDeliveryGeneralPO_refresh")})).catch((function(e){console.log("Malo",e),t.$q.loading.hide()}))}},mounted:function(){console.log(this.note),this.columRow(),console.log(this.rows)}},p=m,h=a("2877"),f=a("3b73"),v=a("4074"),_=a("0170"),b=a("a370"),g=a("eaac"),C=a("9c40"),y=a("24e8"),w=a("f09f"),q=a("eb85"),x=a("7f67"),Q=a("eebe"),k=a.n(Q),D=Object(h["a"])(p,l,c,!1,null,null,null),$=D.exports;k()(D,"components",{QExpansionItem:f["a"],QItemSection:v["a"],QItemLabel:_["a"],QCardSection:b["a"],QTable:g["a"],QBtn:C["a"],QDialog:y["a"],QCard:w["a"],QSeparator:q["a"]}),k()(D,"directives",{ClosePopup:x["a"]});var N={data:function(){return{}},components:{header_vel:r["a"],noteCard:$},computed:{delivery:{get:function(){return this.$store.getters["delivery/noteDeliveryGeneral"]}}},watch:{},methods:{ver:function(){console.log(this.delivery),this.$store.dispatch("delivery/getDeliveryGeneral")}},mounted:function(){var t=this;this.ver(),this.$root.$on("NoteDeliveryGeneralPO_refresh",(function(){t.ver()}))}},M=N,I=a("1c1c"),T=Object(h["a"])(M,s,n,!1,null,null,null),E=T.exports;k()(T,"components",{QList:I["a"]});var S={data:function(){return{}},components:{deliveryCompra:E},methods:{inicialize:function(){}},mounted:function(){this.inicialize()}},O=S,P=a("9989"),R=Object(h["a"])(O,o,i,!1,null,null,null);e["default"]=R.exports;k()(R,"components",{QPage:P["a"]})}}]);